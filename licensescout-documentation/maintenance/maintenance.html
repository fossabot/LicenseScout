<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 from src\site\asciidoc/maintenance\maintenance.adoc at 2019-12-15
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.1" />
    <title>LicenseScout Documentation &#x2013; </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/aposin/LicenseScout">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>LicenseScout Documentation</h2>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2019-12-15</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 1.3.1-SNAPSHOT</li>
      <li class="pull-right"><a href="https://aposin.org/" class="externalLink" title="APOSIN">APOSIN</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Parent Project</li>
    <li><a href="../../index.html" title="LicenseScout parent"><span class="none"></span>LicenseScout parent</a></li>
   <li class="nav-header">Overview</li>
    <li><a href="../index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="../faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="https://www.apache.org/licenses/LICENSE-2.0" class="externalLink" title="License"><span class="none"></span>License</a></li>
    <li><a href="../sitemap.html" title="Sitemap"><span class="none"></span>Sitemap</a></li>
   <li class="nav-header">Documentation</li>
    <li><a href="../documentation.html" title="User Manual"><span class="icon-chevron-down"></span>User Manual</a>
     <ul class="nav nav-list">
      <li><a href="../usermanual/design.html" title="Design"><span class="none"></span>Design</a></li>
      <li><a href="../usermanual/configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
      <li><a href="../usermanual/internals.html" title="Internals"><span class="none"></span>Internals</a></li>
      <li><a href="../usermanual/database.html" title="Database"><span class="none"></span>Database</a></li>
      <li><a href="../usermanual/miscellaneous.html" title="Miscellaneous"><span class="none"></span>Miscellaneous</a></li>
     </ul></li>
    <li><a href="../cookbook/cookbook.html" title="Cookbook"><span class="none"></span>Cookbook</a></li>
    <li class="active"><a href="#"><span class="none"></span>Maintenance manual</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
   <li class="nav-header">APOSIN Projects</li>
    <li><a href="https://aposin.org/open-insurance-platform/" class="externalLink" title="Open Insurance Platform"><span class="none"></span>Open Insurance Platform</a></li>
    <li><a href="https://github.com/aposin/MergeProcessor" class="externalLink" title="Mergeprocessor"><span class="none"></span>Mergeprocessor</a></li>
    <li><a href="https://github.com/aposin/CalculusPrime-PnC" class="externalLink" title="CalculusPrime PnC"><span class="none"></span>CalculusPrime PnC</a></li>
   <li class="nav-header">APOSIN</li>
    <li><a href="https://aposin.org/about/" class="externalLink" title="About"><span class="none"></span>About</a></li>
    <li><a href="https://aposin.org/faq" class="externalLink" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="https://aposin.org/#projects" class="externalLink" title="Projects"><span class="none"></span>Projects</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>LicenseScout maintenance manual</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This handbook describes project maintenance tasks for the LicenseScout project.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="doing_releases">Doing releases</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="setup_for_releases">Setup for releases</h3>
<div class="paragraph">
<p>You need a local Maven installation.</p>
</div>
<div class="paragraph">
<p>You need basic knowledge of Maven. If you are new to Maven, check out this:
<a href="https://maven.apache.org/guides/getting-started/maven-in-five-minutes.html" class="bare">https://maven.apache.org/guides/getting-started/maven-in-five-minutes.html</a></p>
</div>
</div>
<div class="sect2">
<h3 id="customize_settings_file">Customize settings file</h3>
<div class="listingblock">
<div class="title">Minimal settings.xml file</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#579">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span style="color:#070;font-weight:bold">&lt;settings</span> <span style="color:#b48">xmlns</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://maven.apache.org/SETTINGS/1.0.0</span><span style="color:#710">&quot;</span></span>
  <span style="color:#b48">xmlns:xsi</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#710">&quot;</span></span>
  <span style="color:#b48">xsi:schemaLocation</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd</span><span style="color:#710">&quot;</span></span><span style="color:#070;font-weight:bold">&gt;</span>

  <span style="color:#070;font-weight:bold">&lt;servers&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;server&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;id&gt;</span>ossrh<span style="color:#070;font-weight:bold">&lt;/id&gt;</span>                                   <i class="conum" data-value="1"></i><b>(1)</b>
      <span style="color:#070;font-weight:bold">&lt;username&gt;</span>[SONATYPE ACCOUNT ID]<span style="color:#070;font-weight:bold">&lt;/username&gt;</span>       <i class="conum" data-value="2"></i><b>(2)</b>
      <span style="color:#070;font-weight:bold">&lt;password&gt;</span>[SONATYPE ACCOUNT PASSWORD]<span style="color:#070;font-weight:bold">&lt;/password&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span style="color:#070;font-weight:bold">&lt;/server&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/servers&gt;</span>

  <span style="color:#070;font-weight:bold">&lt;profiles&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;profile&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;id&gt;</span>ossrh<span style="color:#070;font-weight:bold">&lt;/id&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;activation&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;activeByDefault&gt;</span>true<span style="color:#070;font-weight:bold">&lt;/activeByDefault&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;/activation&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;properties&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;gpg.keyname&gt;</span>[PGP SIGNING KEY ID]<span style="color:#070;font-weight:bold">&lt;/gpg.keyname&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
      <span style="color:#070;font-weight:bold">&lt;/properties&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/profile&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/profiles&gt;</span>

<span style="color:#070;font-weight:bold">&lt;/settings&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>this server ID is related to the definitions under <code>&lt;distributionManagement&gt;</code> in the parent POM
and is referenced in the configuration of the <code>nexus-staging-maven-plugin</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>replace the value with the username of your sonatype account</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>replace the value with the password of your sonatype account</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>replace the value with the ID of your GPG key that should be used for code signing</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="use_encrypted_passwords">Use encrypted passwords</h3>
<div class="paragraph">
<p>It is highly recommended to use encrypted passwords in the <code>settings.xml</code> file as described in these resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://maven.apache.org/guides/mini/guide-encryption.html" class="bare">https://maven.apache.org/guides/mini/guide-encryption.html</a></p>
</li>
<li>
<p><a href="https://blog.sonatype.com/2009/10/maven-tips-and-tricks-encrypting-passwords/" class="bare">https://blog.sonatype.com/2009/10/maven-tips-and-tricks-encrypting-passwords/</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="release_project">Release project</h3>
<div class="paragraph">
<p>TODO: replaced by profile in parent</p>
</div>
<div class="paragraph">
<p>There is a special project that contains the parts of LicenseScout that should be released.
It is an aggregator POM called <code>org.aposin.licensescout.release-aggrgator</code>.
It references the following modules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.aposin.licensescout.parent</code></p>
</li>
<li>
<p><code>org.aposin.licensescout.core</code></p>
</li>
<li>
<p><code>org.aposin.licensescout.configuration.sample</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>release-aggregator</code> is configured in a way that it is not installed or deployed itself.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="doing_a_snapshot_release">Doing a snapshot release</h3>
<div class="paragraph">
<p>A Maven profile <code>snapshot-release</code> is used for this.</p>
</div>
<div class="paragraph">
<p>To do a snapshot release take the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Do the following on the command line:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">&gt; cd org.aposin.licensescout.release-aggrgator
&gt; mvn -s .../settings-licensescout-minimal.xml -Psnapshot-release clean deploy</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The command will also work without the profile, but sources will not be included and the artifacts will not be signed.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
No commits to the repository are needed, since the version numbers of the projects remain unchanged.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="doing_a_main_release_manually">Doing a (main) release manually</h3>
<div class="paragraph">
<p>A Maven profile <code>release</code> is used for this.</p>
</div>
<div class="paragraph">
<p>To do a release take the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Do the following on the command line:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">&gt; cd org.aposin.licensescout.release-aggrgator
&gt; mvn -s .../settings-licensescout-minimal.xml -Prelease -Drevision=1.005 clean deploy</code></pre>
</div>
</div>
<div class="paragraph">
<p>TODO: this is unfinished</p>
</div>
<div class="ulist">
<ul>
<li>
<p>mvn scm:tag</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
the release version number is composed of the part in the POM ('1.3.') and the property 'revision' provided on the command line (example: '1.005').
This results in the actual version number (example: '1.3.1.005').
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="profiles_overview">Profiles overview</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Profiles</caption>
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 66.6667%;"/>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Profile ID</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>snapshot-release</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doing snapshot releases</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>release</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Doing (main) releases</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>github-upload</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upload of binaries to Github</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ci-modules</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modules used in the CI build</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>site-modules</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modules used for site generation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>release-modules</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modules used for releases</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>it-modules</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modules used in integration testing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>license-header-modules</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modules used in the license header check</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clean-site-staging</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cleans the global site staging directory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>run-its</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Run integration tests</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>only-eclipse</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains M2E definitions that lead to errors in normal reactor runs</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="site_generation">Site generation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Site generation is done in two steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generating content and staging to a local irectory using the run configuration <code>org.aposin.licensescout.parent_multimodule_site_stage</code>.
This does a <code>package site site:stage</code> with the profiles <code>site-modules,clean-site-staging</code>. Note <code>package</code> is necessary due to a Maven bug (<a href="https://jira.apache.org/jira/browse/MDEP-98" class="bare">https://jira.apache.org/jira/browse/MDEP-98</a>)</p>
</li>
<li>
<p>Checkin from the staging directory to the <code>gh-pages</code> branch using he run configuration
<code>org.aposin.licensescout.parent_site_publish</code> which does <code>scm-publish:publish-scm</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note the definitions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span style="color:#070;font-weight:bold">&lt;/properties&gt;</span>
  ...
  <span style="color:#070;font-weight:bold">&lt;github.owner&gt;</span>aposin<span style="color:#070;font-weight:bold">&lt;/github.owner&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;siteStagingDirectory&gt;</span>C:\dev\tmp\licensescout-stage<span style="color:#070;font-weight:bold">&lt;/siteStagingDirectory&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;siteBranch&gt;</span>gh-pages<span style="color:#070;font-weight:bold">&lt;/siteBranch&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/properties&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The generation uses site descriptor inheritance. To make this work, the parent POM does an <code>attachDescriptor</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="maintaining_eclipse_run_configurations">Maintaining Eclipse run configurations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All run configurations should:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use "Execution environment: JavaSE-11" as runtime JDK</p>
</li>
<li>
<p>Be stored in a folder "launch" in the related project</p>
</li>
<li>
<p>Use a Maven runtime named <code>apache-maven-current</code>.
Eclipse has to be configured that an external Maven installation with this name exists.
(See Window / Preferences / Maven / Installations)</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="naming_conventions">Naming conventions</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="repository_structure">Repository structure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The maven projects should be stored in a folder with the name being the <code>artifactId</code> of the maven project.
Note that there are several tools, from reporting plugins to deploy plugins that assume this nming convention. If the naming convention is not followed, the tools won&#8217;t ork as expected or require additional configuration per project.</p>
</div>
</div>
</div>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2019<a href="http://www.aposin.org">Association for the promotion of open-source insurance software and for the establishment of open interface standards in the insurance industry (Verein zur Förderung quelloffener Versicherungssoftware und Etablierung offener Schnittstellenstandards in der Versicherungsbranche)</a>.
.</p>
        </div>
      </div>
    </footer>
  </body>
</html>