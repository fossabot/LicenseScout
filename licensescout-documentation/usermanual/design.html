<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 from src\site\asciidoc/usermanual\design.adoc at 2019-12-11
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.1" />
    <title>LicenseScoutDoc &#x2013; </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/aposin/LicenseScout">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>LicenseScout Documentation</h2>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2019-12-11</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 1.3.1-SNAPSHOT</li>
      <li class="pull-right"><a href="https://aposin.org/" class="externalLink" title="APOSIN">APOSIN</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Parent Project</li>
    <li><a href="../../../../org.aposin.licensescout.parent/target/completesite/index.html" title="LicenseScout parent"><span class="none"></span>LicenseScout parent</a></li>
   <li class="nav-header">Overview</li>
    <li><a href="../index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="../faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="https://www.apache.org/licenses/LICENSE-2.0" class="externalLink" title="License"><span class="none"></span>License</a></li>
    <li><a href="../sitemap.html" title="Sitemap"><span class="none"></span>Sitemap</a></li>
   <li class="nav-header">Documentation</li>
    <li><a href="../documentation.html" title="User Manual"><span class="icon-chevron-down"></span>User Manual</a>
     <ul class="nav nav-list">
      <li class="active"><a href="#"><span class="none"></span>Design</a></li>
      <li><a href="../usermanual/configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
      <li><a href="../usermanual/internals.html" title="Internals"><span class="none"></span>Internals</a></li>
      <li><a href="../usermanual/database.html" title="Database"><span class="none"></span>Database</a></li>
      <li><a href="../usermanual/miscellaneous.html" title="Miscellaneous"><span class="none"></span>Miscellaneous</a></li>
     </ul></li>
    <li><a href="../cookbook/cookbook.html" title="Cookbook"><span class="none"></span>Cookbook</a></li>
    <li><a href="../maintenance/maintenance.html" title="Maintenance manual"><span class="none"></span>Maintenance manual</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
   <li class="nav-header">APOSIN Projects</li>
    <li><a href="https://aposin.org/open-insurance-platform/" class="externalLink" title="Open Insurance Platform"><span class="none"></span>Open Insurance Platform</a></li>
    <li><a href="https://github.com/aposin/MergeProcessor" class="externalLink" title="Mergeprocessor"><span class="none"></span>Mergeprocessor</a></li>
    <li><a href="https://github.com/aposin/CalculusPrime-PnC" class="externalLink" title="CalculusPrime PnC"><span class="none"></span>CalculusPrime PnC</a></li>
   <li class="nav-header">APOSIN</li>
    <li><a href="https://aposin.org/about/" class="externalLink" title="About"><span class="none"></span>About</a></li>
    <li><a href="https://aposin.org/faq" class="externalLink" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="https://aposin.org/#projects" class="externalLink" title="Projects"><span class="none"></span>Projects</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Design</h1>
<div class="sect1">
<h2 id="overall_design">Overall Design</h2>
<div class="sectionbody">
<div class="paragraph">
<p>LicenseScout is implemented as a Maven plugin. It scans a given base directory for artifacts.</p>
</div>
<div class="sect2">
<h3 id="processing_phases">Processing phases</h3>
<div class="sect3">
<h4 id="initialisation">Initialisation</h4>
<div class="paragraph">
<p>Initialisation includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Validity checks on the input parameters</p>
</li>
<li>
<p>Creation of output directory, if necessary</p>
</li>
<li>
<p>Reading of configuration files (licenses, mappings, filters, etc)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="scanlicense_detection">Scan/license detection</h4>
<div class="paragraph">
<p>The configured base directory is scanned recursively, either for Java archives or for NPM packages. The archives found are collected in a list. If license information associated with an archive is found, the license is added to the list associated with the archive.
During this step a mapping of license URLs to license names is done (so that licenses given as URL can be found from the internal list).</p>
</div>
</div>
<div class="sect3">
<h4 id="license_processing">License processing</h4>
<div class="paragraph">
<p>Processings are done:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Manually checked licenses for specific archives are added to the archives from the checked archives list.</p>
</li>
<li>
<p>a license status for each archive is calculated.</p>
</li>
<li>
<p>Global filters are applied: artifact names are matched against a global filter that applies regular expressions on the artifact path name. Artifacts that match are removed.</p>
</li>
<li>
<p>The vendor filter is applied, using the configured vendor names to filter out: artifacts with a certain vendor name in the <code>MANIFEST.MF</code> are removed (this can be used for own artifacts, which should not appear at all).</p>
</li>
<li>
<p>Clean output filtering is applied, if configured</p>
</li>
<li>
<p>Statistics on the total number of archives, the total number of considered license files and the number of archives per license state are calculated.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="report_output">Report Output</h4>
<div class="paragraph">
<p>From the collected, processed and filtered information reports are generated, depending on the output configuration. Either a HTML report, a CSV report, a TXT report, or a combination of these are generated.
The CSV Output is suitable for automatic comparison between versions.
The HTML output uses velocity templates to generate the output. The template used for this is <code>org.aposin.licensescout/src/main/resources/templates/license_report.vm</code>.
The TXT output uses hard-coded text fragments.</p>
</div>
</div>
<div class="sect3">
<h4 id="database_output">Database Output</h4>
<div class="paragraph">
<p>If configured, important data are also written to a database.</p>
</div>
<div class="paragraph">
<p>The results are written into three tables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Builds</code></p>
</li>
<li>
<p><code>LibraryData</code></p>
</li>
<li>
<p><code>DetectedLicenses</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For details on the table structure see the file <code>org.aposin.licensescout.core/sql/licensescout.sql</code>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2019<a href="http://www.aposin.org">Association for the promotion of open-source insurance software and for the establishment of open interface standards in the insurance industry (Verein zur FÃ¶rderung quelloffener Versicherungssoftware und Etablierung offener Schnittstellenstandards in der Versicherungsbranche)</a>.
.</p>
        </div>
      </div>
    </footer>
  </body>
</html>