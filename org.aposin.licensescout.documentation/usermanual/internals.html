<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 from src\site\asciidoc/usermanual\internals.adoc at 2019-12-11
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.1" />
    <title>LicenseScoutDoc &#x2013; </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/aposin/LicenseScout">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h2>LicenseScout Documentation</h2>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2019-12-11</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 1.3.1-SNAPSHOT</li>
      <li class="pull-right"><a href="https://aposin.org/" class="externalLink" title="APOSIN">APOSIN</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Parent Project</li>
    <li><a href="../../../../org.aposin.licensescout.parent/target/completesite/index.html" title="LicenseScout parent"><span class="none"></span>LicenseScout parent</a></li>
   <li class="nav-header">Overview</li>
    <li><a href="../index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="../faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="https://www.apache.org/licenses/LICENSE-2.0" class="externalLink" title="License"><span class="none"></span>License</a></li>
    <li><a href="../sitemap.html" title="Sitemap"><span class="none"></span>Sitemap</a></li>
   <li class="nav-header">Documentation</li>
    <li><a href="../documentation.html" title="User Manual"><span class="icon-chevron-down"></span>User Manual</a>
     <ul class="nav nav-list">
      <li><a href="../usermanual/design.html" title="Design"><span class="none"></span>Design</a></li>
      <li><a href="../usermanual/configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
      <li class="active"><a href="#"><span class="none"></span>Internals</a></li>
      <li><a href="../usermanual/database.html" title="Database"><span class="none"></span>Database</a></li>
      <li><a href="../usermanual/miscellaneous.html" title="Miscellaneous"><span class="none"></span>Miscellaneous</a></li>
     </ul></li>
    <li><a href="../cookbook/cookbook.html" title="Cookbook"><span class="none"></span>Cookbook</a></li>
    <li><a href="../maintenance/maintenance.html" title="Maintenance manual"><span class="none"></span>Maintenance manual</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
   <li class="nav-header">APOSIN Projects</li>
    <li><a href="https://aposin.org/open-insurance-platform/" class="externalLink" title="Open Insurance Platform"><span class="none"></span>Open Insurance Platform</a></li>
    <li><a href="https://github.com/aposin/MergeProcessor" class="externalLink" title="Mergeprocessor"><span class="none"></span>Mergeprocessor</a></li>
    <li><a href="https://github.com/aposin/CalculusPrime-PnC" class="externalLink" title="CalculusPrime PnC"><span class="none"></span>CalculusPrime PnC</a></li>
   <li class="nav-header">APOSIN</li>
    <li><a href="https://aposin.org/about/" class="externalLink" title="About"><span class="none"></span>About</a></li>
    <li><a href="https://aposin.org/faq" class="externalLink" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="https://aposin.org/#projects" class="externalLink" title="Projects"><span class="none"></span>Projects</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Internals</h1>
<div class="sect1">
<h2 id="internals">Internals</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="scan_for_java_goal_scanjava">Scan for JAVA (goal: <code>scanJava</code>)</h3>
<div class="paragraph">
<p>The scanning process starts with the configured scan directory (parameter <code>scanDirectory</code>). The entries of this directory are examined.
Directories are checked if they contain a subdirectory <code>META-INF</code> containing a file <code>MANIFEST.MF</code>. If so, they are assumed to be an unpacked JAR and processed further as an archive. Other directories are further processed recursively.
Files with a filename that Ends with <code>.jar</code> are tried to open as a JAR file and processed further as a packed jar. Other files are ignored.
In packed as well as in unpacked JARS the entries (JAR entries or file system entries, respectively) are processed further. JAR files are processed as packed JARS. Other encountered files are considered as license files as described below. Directories are processed further recursively.</p>
</div>
</div>
<div class="sect2">
<h3 id="scan_for_javascript_goal_scannpm">Scan for JAVASCRIPT (goal: <code>scanNpm</code>)</h3>
<div class="paragraph">
<p>The scanning process starts with the configured scan Directory (parameter <code>scanDirectory</code>). Entries of this directory are checked if they are a Directory and contain a file <code>package.json</code>. If so, the directory is assumed to be an NPM package and is processed further. Other directories are processed recursively. If the name of a Directory matches and entry of the excluded dir names, it is ignored. Plain files are ignored, too. For directories representing an NPM package its <code>package.json</code> is examined for name, version, vendor and license information. Then, the directory is scanned recursively for other files that  may contain license Information in text.</p>
</div>
</div>
<div class="sect2">
<h3 id="license_detection_from_text_files">License detection from text files</h3>
<div class="paragraph">
<p>Files are selected for automatic detection of licenses if their file name fulfills certain criteria. For Java, a filename meets the criteria if it ends with <code>txt</code>, <code>htm</code> or <code>html</code>, or if the filename contains <code>license</code>, <code>licence</code> or <code>notice</code> and does not end with <code>.class</code>. For Javascript the filename meets the criteria if it contains <code>license</code> or <code>readme</code>. All file name comparisons are done case-insensitive.</p>
</div>
<div class="paragraph">
<p>Files selected for license detection are opened as text files and processed line by line. If the line contains a detection string (for the license name, see file <code>licenses.xml</code>) the associated list of licenses is taken as the current candidate license list. If there is a candidate license list, the current line is also scanned for a version number. If a version number is found, the candidate license list is checked for a license that matches the version number. If no license matches, the first element of the list is taken as a detected license and added to a set of overall detected licenses.
If a detection string is found and there is already a candidate license list it is assumed that there will be no version number for the current candidate license list. Therefore, the default element of the current candidate list is used as a detected license. Then, the license list associated with the newly detected string becomes the new current candidate license list. All license lists that have been encountered are also stored in a set. If a new license list is found it is checked against the know processed lists. If a license list is found, it is assumed that it is already processed and will not be handled a second time.
If no version number is detected in the three lines following the line where the license name was detected, it is assumed that there is no version number and the default element of the candidate list is used as a detected license.
If the end of the file is met and there is still a candidate license list, also the default element of the list is used as a detected license.</p>
</div>
</div>
<div class="sect2">
<h3 id="special_handling_for_mit_licenses">Special handling for MIT licenses</h3>
<div class="paragraph">
<p>MIT style licenses typically have the name of the author or organisation that is the license holder as part of the license text (this is required to be copied without modifications). To fulfill this requirement automatically, files containing <code>license</code> in their file name (case insensitive) are considered as full license texts. If an artifact has MIT as a detected license and a full license text is available, the standard MIT license object is replaced in this artifacts license list by a license object that contains the actual license text. This way, the actual license text is used in the license text report.</p>
</div>
</div>
<div class="sect2">
<h3 id="license_processing_details">License processing details</h3>
<div class="paragraph">
<p>Detection status is set according to the following rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If there are manually configured licenses and the list of automatically detected licenses is empty the status of the archive becomes <code>MANUALLY_DETECTED</code>.</p>
</li>
<li>
<p>If there are manually configured licenses and the list of automatically detected licenses is not empty the status of the archive becomes <code>MANUALLY_SELECTED</code>.</p>
</li>
<li>
<p>If there are no manually configured licenses and the list of automatically detected licenses contains more than one entry the status of the archive becomes <code>MULTIPLE_DETECTED</code>.</p>
</li>
<li>
<p>If there are no manually configured licenses and the list of automatically detected licenses contains one entry the status of the archive becomes <code>DETECTED</code>.</p>
</li>
<li>
<p>If there are no manually configured licenses and no automatically detected licenses the status of the archive becomes <code>NOT_DETECTED</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Legal status is set according to the following rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If one of the licenses (of an archive) has status <code>UNKNOWN</code>, the status of the archive becomes <code>UNKNOWN</code>.</p>
</li>
<li>
<p>If there are only licenses with status <code>ACCEPTED</code>, the status of the archive becomes <code>ACCEPTED</code>.</p>
</li>
<li>
<p>If there are only licenses with status <code>NOT_ACCEPTED</code>, the status of the archive becomes <code>NOT_ACCEPTED</code>.</p>
</li>
<li>
<p>If there are licenses with status <code>ACCEPTED</code> and licenses with status <code>NOT_ACCEPTED</code>, the status of the archive becomes <code>CONFLICTING</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2019<a href="http://www.aposin.org">Association for the promotion of open-source insurance software and for the establishment of open interface standards in the insurance industry (Verein zur Förderung quelloffener Versicherungssoftware und Etablierung offener Schnittstellenstandards in der Versicherungsbranche)</a>.
.</p>
        </div>
      </div>
    </footer>
  </body>
</html>